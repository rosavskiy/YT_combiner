# üé¨ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Video Rebuild –¥–ª—è YT_combiner

**–î–∞—Ç–∞:** 14 –¥–µ–∫–∞–±—Ä—è 2025  
**–§–æ—Ä–º–∞—Ç—ã:** –ù–æ–≤–æ—Å—Ç–∏ / –ò—Å—Ç–æ—Ä–∏—è / –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è (–ë–ï–ó –∞–≤–∞—Ç–∞—Ä–æ–≤)

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ –ø–∞—Ä—Å–µ—Ä–∞)                         ‚îÇ
‚îÇ ‚îú‚îÄ full_text (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞)                          ‚îÇ
‚îÇ ‚îú‚îÄ segments (—Ç–µ–∫—Å—Ç + —Ç–∞–π–º–∏–Ω–≥–∏)                      ‚îÇ
‚îÇ ‚îú‚îÄ chapters (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–µ–æ)                       ‚îÇ
‚îÇ ‚îú‚îÄ info (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–µ–≥–∏, –æ–ø–∏—Å–∞–Ω–∏–µ)                  ‚îÇ
‚îÇ ‚îî‚îÄ duration (–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞                             ‚îÇ
‚îÇ    - –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ chapters (–µ—Å–ª–∏ –µ—Å—Ç—å)              ‚îÇ
‚îÇ    - –ò–ª–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∂–¥—ã–µ 20-30 —Å–µ–∫)              ‚îÇ
‚îÇ    - –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–∑–≤—É—á–∫–∏ (ElevenLabs)                   ‚îÇ
‚îÇ    - –ë–µ—Ä—ë–º full_text –∏–ª–∏ —Å–∫–ª–µ–∏–≤–∞–µ–º segments         ‚îÇ
‚îÇ    - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º MP3 —á–µ—Ä–µ–∑ API                       ‚îÇ
‚îÇ    - –°–æ—Ö—Ä–∞–Ω—è–µ–º: data/ai-outputs/voice_{jobId}.mp3   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. –ü–æ–¥–±–æ—Ä –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞                      ‚îÇ
‚îÇ    –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞:                            ‚îÇ
‚îÇ    ‚îú‚îÄ –í–∞—Ä–∏–∞–Ω—Ç A: Pexels API (stock video)           ‚îÇ
‚îÇ    ‚îú‚îÄ –í–∞—Ä–∏–∞–Ω—Ç B: Unsplash API (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–æ—Ç–æ)      ‚îÇ
‚îÇ    ‚îî‚îÄ –í–∞—Ä–∏–∞–Ω—Ç C: Stable Diffusion (AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)    ‚îÇ
‚îÇ    –°–∫–∞—á–∏–≤–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. –ú–æ–Ω—Ç–∞–∂ (ffmpeg)                                  ‚îÇ
‚îÇ    - –°–∫–ª–µ–∏–≤–∞–µ–º B-roll –∫–ª–∏–ø—ã –ø–æ —Ç–∞–π–º–∏–Ω–≥–∞–º            ‚îÇ
‚îÇ    - –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –æ–∑–≤—É—á–∫—É                            ‚îÇ
‚îÇ    - –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥—ã (crossfade)                 ‚îÇ
‚îÇ    - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Ñ–æ–Ω                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞                                    ‚îÇ
‚îÇ    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SRT —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ segments            ‚îÇ
‚îÇ    - –í–∂–∏–≥–∞–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –≤ –≤–∏–¥–µ–æ (burn-in)           ‚îÇ
‚îÇ    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç—Ä–æ/–∞—É—Ç—Ä–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)           ‚îÇ
‚îÇ    - –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä MP4                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –†–µ–∑—É–ª—å—Ç–∞—Ç: data/ai-outputs/rebuilt_{jobId}.mp4      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### NPM –ø–∞–∫–µ—Ç—ã:
```json
{
  "elevenlabs": "^0.8.0",           // TTS –æ–∑–≤—É—á–∫–∞
  "fluent-ffmpeg": "^2.1.3",        // –ú–æ–Ω—Ç–∞–∂ –≤–∏–¥–µ–æ
  "axios": "^1.6.0",                // HTTP –∑–∞–ø—Ä–æ—Å—ã (—É–∂–µ –µ—Å—Ç—å)
  "natural": "^6.10.0",             // NLP –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  "keyword-extractor": "^0.0.28",   // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è keywords
  "compromise": "^14.10.0"          // –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π NLP
}
```

### –í–Ω–µ—à–Ω–∏–µ API:
- **ElevenLabs** ‚Äî –æ–∑–≤—É—á–∫–∞ ($0.30/1000 –∑–Ω–∞–∫–æ–≤)
- **Pexels** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∏–¥–µ–æ (200 req/—á–∞—Å)
- **Pixabay** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∏–¥–µ–æ/—Ñ–æ—Ç–æ (—Ä–µ–∑–µ—Ä–≤)
- **Unsplash** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ñ–æ—Ç–æ (5000 req/—á–∞—Å)

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `ffmpeg` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ú–∏–Ω–∏–º—É–º 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ videoRebuildService.js      ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îÇ       ‚îú‚îÄ‚îÄ ttsService.js               ‚Üê ElevenLabs –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ stockFootageService.js      ‚Üê Pexels/Pixabay/Unsplash
‚îÇ       ‚îú‚îÄ‚îÄ keywordExtractorService.js  ‚Üê NLP –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ videoEditorService.js       ‚Üê ffmpeg –º–æ–Ω—Ç–∞–∂
‚îÇ       ‚îî‚îÄ‚îÄ subtitlesService.js         ‚Üê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SRT
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ ai-outputs/
‚îÇ       ‚îú‚îÄ‚îÄ voice/                      ‚Üê MP3 –æ–∑–≤—É—á–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ footage/                    ‚Üê –°–∫–∞—á–∞–Ω–Ω—ã–µ B-roll –∫–ª–∏–ø—ã
‚îÇ       ‚îú‚îÄ‚îÄ temp/                       ‚Üê –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ       ‚îî‚îÄ‚îÄ rebuilt/                    ‚Üê –§–∏–Ω–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ
```

---

## üöÄ MVP (–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è)

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –æ–∑–≤—É—á–∫–∞ + —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω (1 –¥–µ–Ω—å)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ElevenLabs
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MP3 –∏–∑ full_text
- –ü—Ä–æ—Å—Ç–æ–µ –≤–∏–¥–µ–æ (—á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω + –æ–∑–≤—É—á–∫–∞)

**–§–∞–π–ª—ã:**
- `backend/src/services/ttsService.js`
- –û–±–Ω–æ–≤–∏—Ç—å `aiVideoService.js` (–¥–æ–±–∞–≤–∏—Ç—å provider: 'rebuild-basic')

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
POST /api/generator/ai/generate
{
  "prompt": "rebuild",
  "options": {
    "provider": "rebuild-basic",
    "videoId": "dQw4w9WgXcQ"
  }
}
```

---

### –§–∞–∑–∞ 2: –ü–æ–¥–±–æ—Ä B-roll + –º–æ–Ω—Ç–∞–∂ (2-3 –¥–Ω—è)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º:**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- –ü–æ–∏—Å–∫ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–ø–æ–≤ —á–µ—Ä–µ–∑ Pexels API
- –°–∫–ª–µ–π–∫–∞ –∫–ª–∏–ø–æ–≤ —á–µ—Ä–µ–∑ ffmpeg
- –ù–∞–ª–æ–∂–µ–Ω–∏–µ –æ–∑–≤—É—á–∫–∏

**–§–∞–π–ª—ã:**
- `backend/src/services/keywordExtractorService.js`
- `backend/src/services/stockFootageService.js`
- `backend/src/services/videoEditorService.js`
- `backend/src/services/videoRebuildService.js`

---

### –§–∞–∑–∞ 3: –°—É–±—Ç–∏—Ç—Ä—ã + –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (1-2 –¥–Ω—è)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SRT –∏–∑ segments
- –í–∂–∏–≥–∞–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –≤ –≤–∏–¥–µ–æ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ crossfade –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª—ã:**
- `backend/src/services/subtitlesService.js`
- –û–±–Ω–æ–≤–∏—Ç—å `videoEditorService.js`

---

### –§–∞–∑–∞ 4: UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1 –¥–µ–Ω—å)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "Rebuild" –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –í—ã–±–æ—Ä –≤–∏–¥–µ–æ –∏–∑ —Å–ø–∏—Å–∫–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≥–æ–ª–æ—Å, —Å—Ç–∏–ª—å —Å—É–±—Ç–∏—Ç—Ä–æ–≤)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–§–∞–π–ª—ã:**
- `frontend/src/pages/RebuildPage.jsx`
- `frontend/src/services/rebuildService.js`

---

## üíæ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É ai_tasks:

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è rebuild
ALTER TABLE ai_tasks ADD COLUMN source_video_id TEXT DEFAULT NULL;
ALTER TABLE ai_tasks ADD COLUMN rebuild_options TEXT DEFAULT NULL; -- JSON
ALTER TABLE ai_tasks ADD COLUMN voice_id TEXT DEFAULT NULL;
ALTER TABLE ai_tasks ADD COLUMN subtitle_style TEXT DEFAULT 'default';
```

**–ü—Ä–∏–º–µ—Ä rebuild_options:**
```json
{
  "voiceId": "21m00Tcm4TlvDq8ikWAM",
  "voiceModel": "eleven_multilingual_v2",
  "includeSubtitles": true,
  "subtitleStyle": "modern",
  "backgroundMusic": false,
  "transitions": "crossfade",
  "videoQuality": "1080p"
}
```

---

## üé® –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–¥–±–æ—Ä–∞ B-roll

### –ê–ª–≥–æ—Ä–∏—Ç–º:

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã** (–ø–æ chapters –∏–ª–∏ –∫–∞–∂–¥—ã–µ 20-30 —Å–µ–∫)

2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞:
   - –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ (nouns)
   - –î–µ–π—Å—Ç–≤–∏—è (verbs)
   - –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ (adjectives)
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: TF-IDF (–Ω–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏–º—ã–µ —Å–ª–æ–≤–∞)

3. **–ü–æ–∏—Å–∫ B-roll:**
   - –ó–∞–ø—Ä–æ—Å –≤ Pexels API —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (>=5 —Å–µ–∫)
   - –í—ã–±–æ—Ä —Ç–æ–ø-3 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

4. **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
   - –ï—Å–ª–∏ Pexels –Ω–µ –Ω–∞—à—ë–ª ‚Üí –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Pixabay
   - –ï—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ—Ç ‚Üí –≤–∑—è—Ç—å —Ñ–æ—Ç–æ –∏–∑ Unsplash –∏ —Å–¥–µ–ª–∞—Ç—å Ken Burns —ç—Ñ—Ñ–µ–∫—Ç
   - –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ñ–æ–Ω (gradient/color)

5. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:**
   - –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª–∏–ø –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –∫–ª–∏–ø—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üìä –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä: 10-–º–∏–Ω—É—Ç–Ω–æ–µ –≤–∏–¥–µ–æ (–Ω–æ–≤–æ—Å—Ç–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–µ—Ç–∞–ª–∏ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----------|--------|-----------|
| –û–∑–≤—É—á–∫–∞ | 1500 —Å–ª–æ–≤ √ó $0.30/1000 | $0.45 |
| B-roll (20 –∫–ª–∏–ø–æ–≤) | Pexels API | $0.00 |
| –ú–æ–Ω—Ç–∞–∂ | ffmpeg –ª–æ–∫–∞–ª—å–Ω–æ | $0.00 |
| –°—É–±—Ç–∏—Ç—Ä—ã | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ | $0.00 |
| –•–æ—Å—Ç–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ | ~500MB √ó $0.02/GB | $0.01 |
| **–ò–¢–û–ì–û** | | **$0.46** |

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:

- **10 –≤–∏–¥–µ–æ/–¥–µ–Ω—å:** $4.60/–¥–µ–Ω—å = $138/–º–µ—Å
- **100 –≤–∏–¥–µ–æ/–¥–µ–Ω—å:** $46/–¥–µ–Ω—å = $1,380/–º–µ—Å

**–≠–∫–æ–Ω–æ–º–∏—è vs –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- Synthesia: $100/–≤–∏–¥–µ–æ ‚Üí $10,000/–¥–µ–Ω—å ‚ùå
- Pictory: $23/–º–µ—Å (–ª–∏–º–∏—Ç—ã) ‚Üí –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è ‚ùå
- **–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:** $0.46/–≤–∏–¥–µ–æ ‚úÖ

---

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

```bash
# ElevenLabs
ELEVENLABS_API_KEY=sk_xxxxxxxxxxxxx
ELEVENLABS_DEFAULT_VOICE=21m00Tcm4TlvDq8ikWAM  # Rachel (–∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å)
ELEVENLABS_MODEL=eleven_multilingual_v2

# Stock footage
PEXELS_API_KEY=xxxxxxxxxxxxx
PIXABAY_API_KEY=xxxxxxxxxxxxx
UNSPLASH_ACCESS_KEY=xxxxxxxxxxxxx

# Video rebuild settings
REBUILD_MAX_DURATION=900           # 15 –º–∏–Ω—É—Ç –º–∞–∫—Å
REBUILD_DEFAULT_RESOLUTION=1920x1080
REBUILD_DEFAULT_FPS=30
REBUILD_TEMP_DIR=./data/ai-outputs/temp
REBUILD_OUTPUT_DIR=./data/ai-outputs/rebuilt

# ffmpeg settings
FFMPEG_THREADS=4                   # –ö–æ–ª-–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞
FFMPEG_PRESET=medium               # ultrafast|fast|medium|slow (–∫–∞—á–µ—Å—Ç–≤–æ vs —Å–∫–æ—Ä–æ—Å—Ç—å)
```

---

## üìù API Endpoints (–Ω–æ–≤—ã–µ)

### 1. POST /api/generator/rebuild/start

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–±–∏–ª–¥ –≤–∏–¥–µ–æ

**Body:**
```json
{
  "videoId": "dQw4w9WgXcQ",
  "options": {
    "voiceId": "21m00Tcm4TlvDq8ikWAM",
    "includeSubtitles": true,
    "backgroundMusic": false,
    "quality": "1080p"
  }
}
```

**Response:**
```json
{
  "jobId": "ai-1234567890",
  "status": "pending",
  "estimatedTime": "3-5 minutes"
}
```

---

### 2. GET /api/generator/rebuild/status/:jobId

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–µ–±–∏–ª–¥–∞

**Response:**
```json
{
  "jobId": "ai-1234567890",
  "status": "processing",
  "progress": {
    "stage": "editing",         // segmentation | tts | footage | editing | subtitles | rendering
    "percent": 65,
    "currentTask": "–ú–æ–Ω—Ç–∞–∂ —Å–µ–≥–º–µ–Ω—Ç–∞ 13/20"
  },
  "eta": "2 minutes"
}
```

---

### 3. GET /api/generator/rebuild/download/:jobId

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ

**Response:** MP4 —Ñ–∞–π–ª

---

### 4. POST /api/generator/rebuild/preview

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–≤—å—é (–∫–∞–∫–∏–µ –∫–ª–∏–ø—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã)

**Body:**
```json
{
  "videoId": "dQw4w9WgXcQ"
}
```

**Response:**
```json
{
  "segments": [
    {
      "index": 0,
      "duration": 25,
      "text": "Welcome to this video about...",
      "keywords": ["welcome", "video", "tutorial"],
      "suggestedClips": [
        {
          "url": "https://videos.pexels.com/...",
          "duration": 15,
          "source": "pexels",
          "query": "welcome tutorial"
        }
      ]
    }
  ],
  "totalDuration": 600,
  "estimatedCost": 0.46
}
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ù–∞—á–∏–Ω–∞–µ–º —Å –§–∞–∑—ã 1

–°–æ–∑–¥–∞—é —Å–µ–π—á–∞—Å:
1. `ttsService.js` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ElevenLabs
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `aiVideoService.js` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ provider 'rebuild-basic'
3. –¢–µ—Å—Ç–æ–≤—ã–π endpoint

**–ù–∞—á–∏–Ω–∞–µ–º?** üöÄ
